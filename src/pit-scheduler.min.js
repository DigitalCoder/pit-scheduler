(function(b){var H={allowed:["en","fr"],fr:{days:"Jours",months:"Mois",list:"Liste",unlisted:"Non r\u00e9pertori\u00e9",settings:"Options",hideEmptyLine:"Masquer les lignes sans t\u00e2che",description:"Description",assignedUsers:"Utilisateurs assign\u00e9s",from:"Du",to:"au",notSpecified:"Non sp\u00e9cifi\u00e9e",disableLabelsMovement:"D\u00e9sactiver le mouvement des labels",today:"Aujourd'hui",thisWeek:"Cette semaine",thisMonth:"Ce mois-ci",thisYear:"Cette ann\u00e9e",personalized:"Personnalis\u00e9",
    selectAll:"Tout s\u00e9lectionner",always:"toujours",total:"Total",usersWhose:"utilisateur(s) dont",cycleWhose:"cycle(s) dont",inSelectedPeriod:"dans la p\u00e9riode s\u00e9lectionn\u00e9e",all:"Tout",search:"Recherche",addNewTask:"Cr\u00e9er une t\u00e2che",addNewUser:"Cr\u00e9er un utilisateur",name:"Nom",required:"Obligatoire",color:"Couleur",cancel:"Annuler",create:"Cr\u00e9er",createAndAssign:"Cr\u00e9er et assigner",nameAlreadyTaken:"Ce nom est d\u00e9j\u00e0 utilis\u00e9",idAlreadyTaken:"Cet ID est d\u00e9j\u00e0 utilis\u00e9",
    remove:"Supprimer",assign:"Assigner",edit:"Modifier",confirm:"Confirmer",assignTaskTitle:"Assigner des utilisateurs",allInputRequired:"Tous les champs sont obligatoires",requiredField:"Ce champ est obligatoire",userIsAlreadyAssigned:"est d\u00e9j\u00e0 assign\u00e9 \u00e0 cette t\u00e2che pour cette p\u00e9riode",selectUsersToAssign:"S\u00e9lectionnez les utilisateurs \u00e0 assigner",editTask:"Modifier la t\u00e2che",group:"Groupe",selectGroup:"S\u00e9lectionnez un groupe existant",createNewGroup:"Cr\u00e9ez un nouveau groupe",
    or:"ou",notif:{taskCreated:"La t\u00e2che a \u00e9t\u00e9 cr\u00e9\u00e9e avec succ\u00e8s",userCreated:"L'utilisateur a \u00e9t\u00e9 cr\u00e9\u00e9 avec succ\u00e8s",taskRemoved:"La t\u00e2che a correctement \u00e9t\u00e9 supprim\u00e9e",usersAssigned:"utilisateurs ont \u00e9t\u00e9 assign\u00e9s \u00e0 la t\u00e2che",userAssigned:"utilisateur a \u00e9t\u00e9 assign\u00e9 \u00e0 la t\u00e2che",userUnassigned:"a correctement \u00e9t\u00e9 d\u00e9sassign\u00e9",noUser:"<b>Attention : </b>Aucun utilisateur n'a \u00e9t\u00e9 d\u00e9fini",
        noTask:"<b>Attention : </b>Aucune t\u00e2che n'a \u00e9t\u00e9 d\u00e9finie",taskNotExist:"est assign\u00e9 \u00e0 une t\u00e2che qui n'existe pas",taskInformationsUpdated:"La t\u00e2che a \u00e9t\u00e9 modifi\u00e9e",userHasNoTask:"n'est assigned \u00e0 aucune t\u00e2che"}},en:{days:"Days",months:"Months",list:"List",unlisted:"Unlisted",settings:"Settings",hideEmptyLine:"Hide lines with no task",description:"Description",assignedUsers:"Assigned users",from:"From",to:"to",notSpecified:"Not specified",
    disableLabelsMovement:"Disable labels mouvement",today:"Today",thisWeek:"This week",thisMonth:"This month",thisYear:"This year",personalized:"Personalized",selectAll:"Select all",always:"always",total:"Total",usersWhose:"user(s) with",cycleWhose:"cycle(s) with",inSelectedPeriod:"in the selected period",all:"All",search:"Search",addNewTask:"Create a new task",addNewUser:"Create a new user",name:"Name",required:"Required",color:"Color",cancel:"Cancel",create:"Create",createAndAssign:"Create and assign",
    idAlreadyTaken:"This ID is already taken",remove:"Remove",assign:"Assign",edit:"Edit",confirm:"Confirm",assignTaskTitle:"Assign users",allInputRequired:"All fields are required",requiredField:"That field is required",userIsAlreadyAssigned:"is already assigned to this task for this period",selectUsersToAssign:"Select the users to assign",editTask:"Edit a task",group:"Group",selectGroup:"Select an existing group",createNewGroup:"Create a new group",or:"or",notif:{taskCreated:"The task has been successfully created",
        userCreated:"The user has been successfully created",taskRemoved:"The task has been successfully removed",usersAssigned:"users has been assigned to the task",userAssigned:"user has been assigned to the task",userUnassigned:"has correctly been unassigned",noUser:"<b>Warning : </b>No user has been set",noTask:"<b>Warning : </b>No task has been set",taskNotExist:"is assigned to an inexistent task",taskInformationsUpdated:"The task has been edited",userHasNoTask:"is not assigned to any task"}}};b.fn.pitScheduler=
    function(N){var E=b(this);console.group();console.info("Settings initialization");var a=b.extend({date:{current:moment(),selected:moment()},currentDisplay:""},N);void 0===a.defaultDisplay?a.currentDisplay="days":(a.defaultDisplay.toLowerCase(),a.currentDisplay="days"!==a.defaultDisplay&&"months"!==a.defaultDisplay&&"list"!==a.defaultDisplay?"months":a.defaultDisplay);a.defaultColor=a.defaultColor?a.defaultColor:"#00BCD4";a.notificationDuration=a.notificationDuration?a.notificationDuration:4E3;if(void 0===
        a.locale||-1==H.allowed.indexOf(a.locale))a.locale="en";moment.locale(a.locale);a.i18n=H[a.locale];if(void 0===a.hideEmptyLines||1!=a.hideEmptyLines&&0!=a.hideEmptyLines)a.hideEmptyLines=!0;void 0!==a.defaultDate&&moment(a.defaultDate).isValid()&&(a.date.selected=moment(a.defaultDate));console.groupEnd();var k=function(c){console.warn("CALL FUNCTION: updateDisplay: viewMode:"+c);console.warn("CALL FUNCTION: updateDisplayReset");w();b(".pts-main-content").empty();b(".pts-column-title-container > div").empty();
            b(".pts-line-title-container").empty();b(".pts-line-title-container").append(b("<div></div>"));b(".pts-corner-mask").empty();b(".pts-btn-next").removeAttr("disabled");b(".pts-btn-previous").removeAttr("disabled");b(".pts-header-date-display").css("display","block");b("#header-datetimepicker").data("DateTimePicker").enable();b(".pts-column-title-container").css("overflow","hidden");switch(c){case "days":F("day");b(".pts-header-date-display").empty();b(".pts-header-date-display").append(moment(a.date.selected).locale(a.locale).format("LL"));
                a.currentDisplay="days";I();break;case "months":F("month");b(".pts-header-date-display").empty();b(".pts-header-date-display").append(moment(a.date.selected).locale(a.locale).format("MMMM YYYY"));a.currentDisplay="months";I();break;case "list":F("list"),b(".pts-header-date-display").empty(),b(".pts-header-date-display").append(moment(a.date.selected).locale(a.locale).format("LL")),a.currentDisplay="list",b(".pts-btn-next").attr("disabled","disabled"),b(".pts-btn-previous").attr("disabled","disabled"),
                b(".pts-header-date-display").css("display","none"),b(".pts-column-title-container").css("overflow","visible"),b("#header-datetimepicker").data("DateTimePicker").disable(),O(),C("today")}},F=function(a){b(".pts-header-right-container  button").removeClass("pts-active");b(".pts-header-right-container  .pts-btn-"+a+"-view").addClass("pts-active")},D=function(c){console.log("CALL FUNCTION: generateTaskInTask: task: "+c.name);c.users={};if(!a.users)return r("danger",a.i18n.notif.noUser);c.color||(c.color=
            a.defaultColor?a.defaultColor:"#00bdd6");a.users.forEach(function(a,b){a.index=b;a.tasks&&a.tasks.forEach(function(a,d){a.id===c.id&&(c.users[b]||(c.users[b]=[]),c.users[b].push(d))})});return c},K=function(){console.warn("CALL FUNCTION: initGroup");!b(".pts-line-group-container").length&&a.users&&(a.defaultGroupName=a.defaultGroupName?a.defaultGroupName:a.i18n.unlisted,a.groups=[a.defaultGroupName],a.users.forEach(function(b,d){void 0===b.group||""===b.group?b.group=a.defaultGroupName:-1==a.groups.indexOf(b.group)&&
        a.groups.push(b.group)}),a.groups.unlisted=0,a.groups.added=[],a.groups.forEach(function(b,d){var e=P(b);if("added"!==d&&d!==a.defaultGroupName&&0<e.length){var g=!1;e.every(function(b){if(a.users[b]&&1==a.users[b].isShowed)return g=!0,!1});g&&(J(b,d),a.groups.added.push({name:b,id:"user-group-"+d}))}}))},S=function(){console.warn("CALL FUNCTION: initUsers");a.users.forEach(function(a,b){a.isShowed=Q(a);a.lineHeight=R(a);a.index=b})},L=function(){console.log("CALL FUNCTION: updateDatePicker");b("#header-datetimepicker").datetimepicker().data("DateTimePicker").locale(a.locale).defaultDate(a.date.selected).date(a.date.selected).viewDate(a.date.selected).enabledHours(!1).format("months"===
        a.currentDisplay?"MM/YYYY":"L").viewMode("months"===a.currentDisplay?"months":"days")},z=function(a,b){console.log("CALL FUNCTION: isDateInDate");return moment(b.start_date)<=moment(a.start_date)&&moment(b.end_date)>=moment(a.end_date)||moment(b.start_date)>=moment(a.start_date)&&moment(b.start_date)<=moment(a.end_date)||moment(b.end_date)<=moment(a.end_date)&&moment(b.end_date)>=moment(a.start_date)?!0:!1},u=function(b){console.log("CALL FUNCTION: getTaskById: taskId: "+b);if(a.tasks){var d;a.tasks.forEach(function(a){a.id===
        b&&(d=a)});return d}},T=function(b){console.log("CALL FUNCTION: userHasTask: user: "+b.name);var d=!1,e={start_date:"days"==a.currentDisplay?moment(a.date.selected).startOf("day"):moment(a.date.selected).startOf("month"),end_date:"days"==a.currentDisplay?moment(a.date.selected).endOf("day"):moment(a.date.selected).endOf("month")};b.tasks.forEach(function(a){1==z(e,a)&&(d=!0)});return d},R=function(b){console.log("CALL FUNCTION: getUserLineHeight: user: "+b.name);var d=[],e=b.isShowed,g={start_date:"days"==
        a.currentDisplay?moment(a.date.selected).startOf("day"):moment(a.date.selected).startOf("month"),end_date:"days"==a.currentDisplay?moment(a.date.selected).endOf("day"):moment(a.date.selected).endOf("month")};b.tasks.forEach(function(b){a.hideEmptyLines&&0>d.indexOf(b.id)&&1==z(g,b)?d.push(b.id):!a.hideEmptyLines&&0>d.indexOf(b.id)&&1==e&&d.push(b.id)});return 40*d.length},Q=function(b){console.log("CALL FUNCTION: userLineIsShowed: user: "+b.name);var d=0,e={start_date:"days"==a.currentDisplay?moment(a.date.selected).startOf("day"):
            moment(a.date.selected).startOf("month"),end_date:"days"==a.currentDisplay?moment(a.date.selected).endOf("day"):moment(a.date.selected).endOf("month")};if(!b.tasks)return r("warning","<b>"+b.name+"</b> "+a.i18n.notif.userHasNoTask);b.tasks.forEach(function(a){z(e,a)&&d++});return 0<d||!1===a.hideEmptyLines},G=function(){console.log("CALL FUNCTION: setTaskLabelPosition");if(!a.disableLabelsMovement){var c=b(".pts-line-marker:has(> .pts-line-marker-label)"),d=parseInt(b(".pts-line-title-container").offset().left+
            b(".pts-line-title-container").width());b.each(c,function(){var a=b(this).children(),c=parseInt(b(this).offset().left)+parseInt(b(this).width())-parseInt(a.width());parseInt(b(this).offset().left)<d&&c>d+20?a.css("left",b(".pts-scheduler-container").scrollLeft()-parseInt(b(this).css("left"))+10):a.css("left","10px")})}},P=function(b){console.log("CALL FUNCTION: getUsersInGroup: groupName"+b);var d=[];a.users.forEach(function(a){a.group==b&&d.push(a.index)});return d},q=function(c,d,e){console.warn("CALL FUNCTION: openInfoBox: taskId: "+
            c+": userIndex: "+d+": viewType: "+e);var g=b("#pts-info-box-container");g.empty();switch(e){case "task":e=u(c);var t=b(".pts-line-marker");U(e,a.users[d]);b.each(t,function(){b(this).css("background-color",u(b(this).attr("data-task")).color);b(this).attr("data-task")!==c&&b(this).css("background-color","#8e8e8e")});b(".pts-main-group-column").css("background-color","#eee");g.attr("data-toggle","opened");break;case "user":V(a.users[d]);g.attr("data-toggle","opened");break;case "createTask":W();g.attr("data-toggle",
        "opened");break;case "assignTask":X(c);g.attr("data-toggle","opened");break;case "editTask":Y(c);g.attr("data-toggle","opened");break;case "createUser":Z();g.attr("data-toggle","opened");break;default:return}g.animate({width:"460px"},300);v()},w=function(){console.warn("CALL FUNCTION: closeInfoBox");var c=b("#pts-info-box-container"),d=b(".pts-line-marker");"closed"!==c.attr("data-toggle")&&(b.each(d,function(){var c=u(b(this).attr("data-task"));b(this).css("background-color",c?c.color:a.defaultColor)}),
            b(".pts-main-group-column").css("background-color","#fff"),c.animate({width:"0%"},300),c.attr("data-toggle","closed"),c.empty(),v())},aa=function(a,b,e){console.log("CALL FUNCTION: hideTaskSuperposition: originIndex: "+a+":task: "+b.name+": user: "+e.name);e.tasks.forEach(function(e,t){e.id===b.id&&t!==a&&(moment(e.start_date).format("YYYYMMDD")==moment(b.end_date).format("YYYYMMDD")&&(12>=moment(e.start_date).format("H")&&12>=moment(b.end_date).format("H")||12<moment(e.start_date).format("H")&&12<
        moment(b.end_date).format("H"))&&(b.end_date=e.end_date),moment(b.start_date).format("YYMMDD")==moment(e.end_date).format("YYMMDD")&&(12>=moment(b.start_date).format("H")&&12>=moment(e.end_date).format("H")||12<moment(b.start_date).format("H")&&12<moment(e.end_date).format("H"))&&(b.disabled=!0))});return b},v=function(){console.log("CALL FUNCTION: getContrastedColor");b(".pts-check-color").each(function(){var a=b(this).css("background-color").match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);a&&4==a.length&&
        (.6<(.299*a[1]+.587*a[2]+.114*a[3])/255?(b(this).children().css("color","#000"),b(this).css("color","#000")):(b(this).children().css("color","#fff"),b(this).css("color","#fff")))})},C=function(c){console.log("CALL FUNCTION: switchListRange: range: "+c);b(".pts-list-tasks-container").empty();switch(c){case "all":a.list.start_date=moment();a.list.end_date=moment();c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.all+" :</b></h4>";b(".pts-list-tasks-container").append(c);break;case "today":a.list.start_date=
            moment().startOf("day");a.list.end_date=moment().endOf("day");c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.from+"</b> "+a.list.start_date.locale(a.locale).format("lll")+" <b>"+a.i18n.to+"</b> "+a.list.end_date.locale(a.locale).format("lll")+" :</h4>";b(".pts-list-tasks-container").append(c);break;case "week":a.list.start_date=moment().startOf("week");a.list.end_date=moment().endOf("week");c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.from+"</b> "+a.list.start_date.locale(a.locale).format("lll")+
            " <b>"+a.i18n.to+"</b> "+a.list.end_date.locale(a.locale).format("lll")+" :</h4>";b(".pts-list-tasks-container").append(c);break;case "month":a.list.start_date=moment().startOf("month");a.list.end_date=moment().endOf("month");c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.from+"</b> "+a.list.start_date.locale(a.locale).format("lll")+" <b>"+a.i18n.to+"</b> "+a.list.end_date.locale(a.locale).format("lll")+" :</h4>";b(".pts-list-tasks-container").append(c);break;case "year":a.list.start_date=moment().startOf("year");
            a.list.end_date=moment().endOf("year");c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.from+"</b> "+a.list.start_date.locale(a.locale).format("lll")+" <b>"+a.i18n.to+"</b> "+a.list.end_date.locale(a.locale).format("lll")+" :</h4>";b(".pts-list-tasks-container").append(c);break;case "personalized":c='<h4 style="margin:0 0 15px 15px"><b>'+a.i18n.from+"</b> "+a.list.start_date.locale(a.locale).format("lll")+" <b>"+a.i18n.to+"</b> "+a.list.end_date.locale(a.locale).format("lll")+" :</h4>",b(".pts-list-tasks-container").append(c)}a.tasks.forEach(function(a){b(".pts-list-task-enabler-input[data-task="+
            a.id+"]").is(":checked")&&ba(a)})},ca=function(b,d,e,g,t){console.warn("CALL FUNCTION: createNewTask");b={id:0<d.length?d:M(),name:b,description:0<e.length?e:"",color:0<g.length?g:a.defaultColor};b=D(b);a.tasks.push(b);if(a.onTaskCreation&&"function"===typeof a.onTaskCreation)a.onTaskCreation(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);r("success",a.i18n.notif.taskCreated+" : <b>"+b.name+"</b>");if(1==t)return q(b.id,null,"assignTask")},M=function(){console.log("CALL FUNCTION: generateRandomId");
            var a=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()},da=function(c){console.warn("CALL FUNCTION: removeTask");b.each(a.tasks,function(b,e){e&&e.id===c&&delete a.tasks[b]});b.each(a.users,function(d,e){b.each(e.tasks,function(b,e){e&&e.id===c&&delete a.users[d].tasks[b]})});k(a.currentDisplay);if(a.onTaskRemoval&&"function"===typeof a.onTaskRemoval)a.onTaskRemoval(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);
            r("success",a.i18n.notif.taskRemoved)},ea=function(c,d,e,g){console.warn("CALL FUNCTION: assignUsersToTask");var t={start_date:e,end_date:g};b("#pts-assign-task-err").empty();if(c&&d&&e&&g){c.forEach(function(c){c=a.users[c];var A=!1;c.tasks.forEach(function(a){a.id===d.id&&(z(a,t)||z(t,a))&&(A=!0)});if(A)return b("#pts-assign-task-err").append("<b>"+c.name+"</b> "+a.i18n.userIsAlreadyAssigned+"<br>");c.tasks.push({id:d.id,start_date:moment(e).format("YYYY-MM-DD HH:mm"),end_date:moment(g).format("YYYY-MM-DD HH:mm")});
            D(d);if(0==b(".pts-info-box-user[data-user="+c.index+"]").length){var f='<hr><div class="pts-info-box-user animated fadeIn" data-user="'+c.index+'"><h4 class=" text-semibold heading-divided">'+c.name+'</h4><table><tbody class="pts-info-box-user-list" data-head="'+c.index+'"></tbody></table></div>';b("#pts-info-box-container > .panel-body").append(f)}f=['<tr class="animated fadeIn"><td>','<i class="glyphicon glyphicon-trash pts-task-assign-delete-user" data-user="'+c.index+'" data-task="'+d.id+'" data-task-index="'+
            (c.tasks.length-1)+'"></i>',"<b>"+a.i18n.from+"</b> "+moment(e).locale(a.locale).format("llll")," <b>"+a.i18n.to+"</b> "+moment(g).locale(a.locale).format("llll")+"</td></tr>"].join("\n");b(".pts-info-box-user-list[data-head="+c.index+"]").append(f);b("#pts-info-box-container").scrollTop(b("#pts-info-box-container")[0].scrollHeight)});if(a.onTaskAssignation&&"function"===typeof a.onTaskAssignation)a.onTaskAssignation(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);r("success","<b>"+
            c.length+"</b> "+(1<c.length?a.i18n.notif.usersAssigned:a.i18n.notif.userAssigned)+" <b>"+d.name+"</b>")}},I=function(){console.warn("CALL FUNCTION: generateMainContent");console.warn("CALL FUNCTION: generateBaseView");b(".pts-main-container").length||E.append('<div class="pts-main-container row">\n<div id="pts-info-box-container" data-toggle="closed"></div>\n<div class="pts-corner-mask"></div>\n<div class="pts-column-title-container">\n<div></div></div>\n<div class="pts-line-title-container"><div>\n</div></div>\n<div class="pts-scheduler-container">\n<div class="pts-main-content">\n</div></div></div>');
            x();K();y();B();L()},x=function(){console.warn("CALL FUNCTION: generateTableLines");S();b(".pts-column-title-container > div").empty();b(".pts-main-content").empty();b(".pts-corner-mask").empty();if("days"==a.currentDisplay)for(var c=0,d=0;25>d;d++)b(".pts-column-title-container > div").append('<div class="pts-column-element">'+(24>d?"<p>"+d+":00</p>":"")+"</div>"),24>d&&b(".pts-main-content").append('<div class="pts-main-group-column" style="left:'+c+'px"><div></div></div>'),c+=120;else if("months"==
            a.currentDisplay)for(var e=moment(a.date.selected).add(-1*(moment(a.date.selected).format("D")-1),"day"),c=0,g=parseInt(moment(a.date.selected).daysInMonth())+1,d=1;d<=g;d++)b(".pts-column-title-container > div").append('<div class="pts-column-element" data-date="'+moment(e).format("YYYY-MM-DD")+'">'+(d<g?"<p>"+e.locale(a.locale).format("ddd")+" "+d+"</p>":"")+"</div>"),d<g&&b(".pts-main-content").append('<div class="pts-main-group-column" style="left:'+c+'px"><div></div></div>'),c+=120,e.add(1,"day");
            c=['<div style="display:inline-flex"><div class="dropdown" style="top:2px"><button id="addDropdown" class="btn btn-sm pts-btn-add-elem dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n<i class="glyphicon glyphicon-plus"></i></button>\n<ul class="dropdown-menu" aria-labelledby="addDropdown">','<li><a href="#" class="pts-add-new-task">'+a.i18n.addNewTask+"</a></li>",'<li><a href="#" class="pts-add-new-user">'+a.i18n.addNewUser+"</a></li>",'</ul></div><div class="dropdown">\n<button class="btn btn-default dropdown-toggle" type="button" id="settingsDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">',
                a.i18n.settings+' <span class="caret"></span></button>','<ul class="dropdown-menu" aria-labelledby="settingsDropdown">','<li><label class="checkbox-inline"><input id="hide-user-btn" type="checkbox" value="" '+(a.hideEmptyLines?"checked":"")+">"+a.i18n.hideEmptyLine+"</label></li>",'<li><label class="checkbox-inline"><input id="disable-labels-mov" type="checkbox" value="" '+(a.disableLabelsMovement?"checked":"")+">"+a.i18n.disableLabelsMovement+"</label></li>","</div></div>"].join("\n");b(".pts-corner-mask").append(c)},
        J=function(a,d){console.log("CALL FUNCTION: generateGroupTab: group: "+a);var e=['<div id="user-group-'+d+'" class="pts-line-group-container">','<div class="pts-group-header">','<i class="glyphicon glyphicon-remove pull-left close-group-panel" data-group="'+d+'" data-toggle="opened"></i>',"<span>"+a+"</span></div>",'<div class="pts-group-content"></div></div>'].join("\n");b(".pts-line-title-container > div").append(e)},y=function(){console.log("CALL FUNCTION: generateGroupMainContent");a.groups&&
        (a.groups.added.forEach(function(c,d){var e=['<div id="group-container-'+d+'" class="pts-main-group-container">','<div class="pts-main-group-header"></div></div>'].join("\n");b(".pts-main-content").append(e);a.users.forEach(function(a,e){var h=a.lineHeight;a.group===c.name&&1==a.isShowed&&0<h&&b("#group-container-"+d).append('<div id="content-user-'+e+'" class="pts-main-group-user" style="height:'+h+'px"></div>')});"closed"===b(".close-group-panel[data-group="+d+"]").attr("data-toggle")&&b("#group-container-"+
            d).children(".pts-main-group-user").css("display","none")}),"days"==a.currentDisplay?(b(".pts-main-group-header").css("width","2880px"),b(".pts-main-group-user").css("width","2880px")):(b(".pts-main-group-header").css("width",120*moment(a.date.selected).daysInMonth()+"px"),b(".pts-main-group-user").css("width",120*moment(a.date.selected).daysInMonth()+"px")),a.users.forEach(function(a,b){fa(a,b)}))},B=function(){console.warn("CALL FUNCTION: generateUsersList");if(!a.users||0>=a.users.length)return r("danger",
            a.i18n.notif.noUser);b(".pts-group-content").empty();a.users.forEach(function(b){var d="";a.groups.added.forEach(function(a){if(a.name==b.group||b.id&&a.users&&0<=a.users.indexOf(b.id))d=a.id});d||(a.groups.unlisted||(J(a.i18n.unlisted,a.groups.added.length),a.groups.unlisted=a.groups.added.length,a.groups.added.push({name:a.i18n.unlisted,id:"user-group-"+a.groups.added.length})),d=a.groups.added[a.groups.unlisted].id);ga(b,d)})},ga=function(a,d){console.log("CALL FUNCTION: generateUserLine: user: "+
            a.name);if(!a.tasks)return console.warn("Warning: user "+a.name+" is assigned to any task");if(a.isShowed&&!(0>=a.lineHeight)){var e='<div class="pts-group-user" style="height:'+a.lineHeight+'px" data-user="'+a.index+'"><p>'+a.name+"</p></div>";b("#"+d+" > .pts-group-content").append(e)}},fa=function(c,d){console.warn("CALL FUNCTION: generateTaskLines: user: "+c.name);if(!T(c))return console.log("No task for this user in that period");c.index=d;var e=5;c.tasks&&c.tasks.forEach(function(d,t){var h=
            b.extend(u(d.id),d);if(void 0===h)return r("warning","<b>"+c.name+"</b> "+a.i18n.notif.taskNotExist);h.disabled=!1;h.index=t;if(void 0===h)return console.warn("CALL FUNCTION: Warning: Task "+d.id+" has not be found in tasks array for user "+c.name);if(h.start_date>h.end_date)return console.warn("CALL FUNCTION: Warning: end_date must be later than start_date for user "+c.name+"in task "+d.id);if("months"===a.currentDisplay){if(h=aa(t,h,c),h.end_date&&1!=h.disabled&&moment(a.date.selected).format("YYYYMM")>=
            moment(h.start_date).format("YYYYMM")&&moment(a.date.selected).format("YYYYMM")<=moment(h.end_date).format("YYYYMM")){var A=e,f=h,l=e;console.warn("CALL FUNCTION: generateTaskLineMonth: user: "+c.name+":task: "+f.name);var m=c.index,k=b("div[data-task="+f.id+"][data-user="+m+"] > .pts-line-marker");0<k.length&&(l=k.css("top"));b("#content-user-"+m).append('<div class="pts-line-marker-group-'+f.index+'" data-task="'+f.id+'" data-user="'+m+'"></div>');if(moment(a.date.selected).format("YYYYMM")==moment(f.start_date).format("YYYYMM")){var n=
            12<=moment(f.start_date).format("H")?60:0,p=120*(moment(f.start_date).format("D")-1)+n-6,q=!1;moment(f.end_date).format("YYYYMM")>moment(a.date.selected).format("YYYYMM")?n=120*(parseInt(moment(a.date.selected).daysInMonth())-parseInt(moment(f.start_date).format("D")))+(0==n?120:60):(n=120*(moment(f.end_date).format("D")-moment(f.start_date).format("D"))+(0==n?120:60)-(12>=moment(f.end_date).format("H")?60:0),q=!0);l=parseInt(l);p=parseInt(p);p='<div class="pts-check-color progress-bar-striped pts-line-marker '+
            (q?"complete":"start")+'" style="top:'+l+"px;left:"+p+"px;background-color:"+f.color+";width:"+n+'px" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>";b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p)}moment(a.date.selected).format("YYYYMM")==moment(f.end_date).format("YYYYMM")&&moment(f.start_date).format("YYYYMM")<moment(a.date.selected).format("YYYYMM")&&(n=12>=moment(f.end_date).format("H")?
            60:0,n=120*moment(f.end_date).format("D")-n,l=parseInt(l),p='<div class="pts-check-color progress-bar-striped pts-line-marker end" style="top:'+l+"px;left:0px;background-color:"+f.color+";width:"+n+'px" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>",b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p));moment(a.date.selected).format("YYYYMM")!=moment(f.end_date).format("YYYYMM")&&
        moment(a.date.selected).format("YYYYMM")!=moment(f.start_date).format("YYYYMM")&&(l=parseInt(l),p='<div class="pts-check-color progress-bar-striped pts-line-marker middle" style="top:'+l+"px;left:0px;background-color:"+f.color+';" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>",b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p));G();v();e=A+(0<k.length?0:40)}}else"days"===a.currentDisplay&&
        h.end_date&&moment(a.date.selected).format("YYYYMMDD")>=moment(h.start_date).format("YYYYMMDD")&&moment(a.date.selected).format("YYYYMMDD")<=moment(h.end_date).format("YYYYMMDD")&&(A=e,f=h,l=e,console.warn("CALL FUNCTION: generateTaskLineDay: user: "+c.name+": task: "+f.name),m=c.index,k=b("div[data-task="+f.id+"][data-user="+m+"] > .pts-line-marker"),0<k.length&&(l=k.css("top")),b("#content-user-"+m).append('<div class="pts-line-marker-group-'+f.index+'" data-task="'+f.id+'" data-user="'+m+'"></div>'),
        moment(a.date.selected).format("YYYYMMDD")==moment(f.start_date).format("YYYYMMDD")&&(n=30<=moment(f.start_date).format("mm")?60:0,p=120*moment(f.start_date).format("H")+n-6,q=!1,moment(f.end_date).format("YYYYMMDD")>moment(a.date.selected).format("YYYYMMDD")?n=120*(24-parseInt(moment(f.start_date).format("H"))-1)+(0==n?120:60):(n=120*(moment(f.end_date).format("H")-moment(f.start_date).format("H"))+(0==n?120:60)-(30>moment(f.end_date).format("mm")?120:60),q=!0),l=parseInt(l),p=parseInt(p),p='<div class="pts-check-color progress-bar-striped pts-line-marker '+
            (q?"complete":"start")+'" style="top:'+l+"px;left:"+p+"px;background-color:"+f.color+";width:"+n+'px" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>",b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p)),moment(a.date.selected).format("YYYYMMDD")==moment(f.end_date).format("YYYYMMDD")&&moment(f.start_date).format("YYMMDD")<moment(a.date.selected).format("YYMMDD")&&(n=30>moment(f.end_date).format("mm")?
            120:60,n=120*moment(f.end_date).format("H")-n+120,l=parseInt(l),p='<div class="pts-check-color progress-bar-striped pts-line-marker end" style="top:'+l+"px;left:0px;background-color:"+f.color+";width:"+n+'px" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>",b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p)),moment(a.date.selected).format("YYYYMMDD")!=moment(f.end_date).format("YYYYMMDD")&&
        moment(a.date.selected).format("YYYYMMDD")!=moment(f.start_date).format("YYYYMMDD")&&(l=parseInt(l),p='<div class="pts-check-color progress-bar-striped pts-line-marker middle" style="top:'+l+"px;left:0px;background-color:"+f.color+';" data-task="'+f.id+'" data-user="'+m+'"><p class="pts-line-marker-label text-no-select" data-toggle="tooltip" title="'+f.name+'">'+f.name+"</p></div>",b("#content-user-"+m+" > .pts-line-marker-group-"+f.index).append(p)),G(),v(),e=A+(0<k.length?0:40));delete h.disabled;
            delete h.index;delete h.start_date;delete h.end_date})},U=function(c,d){console.warn("CALL FUNCTION: generateInfoBoxContentTask: task: "+c.name);var e=['<div class="panel-body">','<h4 class="pts-check-color text-semibold pts-info-box-title progress-bar-striped pts-close-info-box" style="background-color:'+c.color+'">'+c.name+'<i class="glyphicon glyphicon-remove pull-right"></i></h4>',"<p><b>"+a.i18n.description+" : </b><br>"+(c.description?c.description:a.i18n.notSpecified)+"</p>",'<div class="btn-group">',
            '<button type="button" class="pts-delete-task-btn btn btn-danger" data-task="'+c.id+'" data-confirm="false">'+a.i18n.remove+"</button>",'<button type="button" class="btn pts-assign-task-btn" style="background-color:#00BCD4;color:#fff" data-task="'+c.id+'">'+a.i18n.assign+"</button>",'<button type="button" class="btn pts-edit-task-btn" style="background-color:#0097A7;color:#fff" data-task="'+c.id+'">'+a.i18n.edit+"</button></div><br>",'<br><div class="divider"></div></div>'].join("\n");b("#pts-info-box-container").append(e);
            b.each(c.users,function(d){var e=a.users[d],h='<div class="pts-info-box-user"><h4 class=" text-semibold heading-divided">'+e.name+'</h4><table><tbody class="pts-info-box-user-list" data-head="'+d+'"></tbody></table></div>';b("#pts-info-box-container > .panel-body").append(h);e.tasks.forEach(function(e){e.id===c.id&&b(".pts-info-box-user-list[data-head="+d+"]").append("<tr><td><b>"+a.i18n.from+"</b> "+moment(e.start_date).locale(a.locale).format("llll")+" <b>"+a.i18n.to+"</b> "+moment(e.end_date).locale(a.locale).format("llll")+
                "</td></tr>")})});v()},V=function(c){console.warn("CALL FUNCTION: generateInfoBoxContentUser: user: "+c.name);var d={};c.tasks.forEach(function(b,e){d[b.id]||(d[b.id]=[]);d[b.id].push('<i class="glyphicon glyphicon-trash pts-task-assign-delete-user" data-user="'+c.index+'" data-task="'+b.id+'" data-task-index="'+e+'"></i><b>'+a.i18n.from+"</b> "+moment(b.start_date).locale(a.locale).format("lll")+"  <b>"+a.i18n.to+"</b> "+moment(b.end_date).locale(a.locale).format("lll"))});var e=['<div class="panel-body">',
            '<h4 class="text-semibold pts-info-box-title pts-close-info-box pts-check-color" style="background-color:#00BCD4" data-update="true">'+c.name+' - <small style="color:#fff">'+c.group+"</small>",'<i class="glyphicon glyphicon-remove pull-right"></i></h4>\n<div class="pts-info-box-user-list"></div></div>'].join("\n");b("#pts-info-box-container").append(e);b.each(d,function(a,d){var e=u(a),e=['<p class="pts-check-color progress-bar-striped pts-info-box-task-header" style="background-color:'+e.color+';margin-top:10px" data-task="'+
        a+'" data-user="'+c.index+'"><b>',e.name+'</b></p><table style="position: relative;left:30px;"><tbody class="pts-user-sorted-task" data-task="'+a+'" class="pts-info-box-user-list" data-head="'+c.index+'">',"</tbody></table>"].join("\n");b(".pts-info-box-user-list").append(e);d.forEach(function(c){b(".pts-user-sorted-task[data-task="+a+"]").append("<tr><td>"+c+"</td></tr>")})});v()},W=function(){console.warn("CALL FUNCTION: generateInfoBoxContentCreateTask");var c=['<div class="panel-body">','<h4 class="text-semibold pts-info-box-title pts-close-info-box pts-check-color" style="background-color:'+
        a.defaultColor+'">'+a.i18n.addNewTask,'<i class="glyphicon glyphicon-remove pull-right"></i></h4>\n<fieldset>','<div class="form-group"><label>'+a.i18n.name+" <small>("+a.i18n.required+')</small> :</label><input id="pts-add-task-input-name" type="text" class="form-control" maxlength="50">','<div id="pts-add-task-err-name" style="color:red"></div></div>\n<div class="form-group"><label>Id :</label><input id="pts-add-task-input-id" type="text" class="form-control" maxlength="80"><div id="pts-add-task-err-id" style="color:red"></div></div>',
            '<div class="form-group"><label>'+a.i18n.color+' :</label><input id="pts-add-task-input-color" type="color" class="form-control" value="'+a.defaultColor+'"></div>','<div class="form-group"><label>'+a.i18n.description+' :</label><textarea id="pts-add-task-input-description" type="text" class="form-control"  maxlength="255"></textarea></div>','<div class="btn-group">','<button type="button" class="pts-close-info-box btn btn-danger">'+a.i18n.cancel+"</button>",'<button type="button" class="btn pts-create-task-btn" style="background-color:#00BCD4;color:#fff" data-assign="true">'+
            a.i18n.createAndAssign+"</button>",'<button type="button" class="btn pts-create-task-btn" style="background-color:#0097A7;color:#fff" data-assign="false">'+a.i18n.create+"</button></div>","</fieldset>\n</div>"].join("\n");b("#pts-info-box-container").append(c)},Y=function(c){console.warn("CALL FUNCTION: generateInfoBoxContentEditTask");if(c=u(c))c=['<div class="panel-body">','<h4 class="text-semibold pts-info-box-title pts-close-info-box pts-check-color progress-bar-striped" style="background-color:'+
        c.color+'">'+c.name,'<i class="glyphicon glyphicon-remove pull-right"></i></h4>','<h4><i class="glyphicon glyphicon-chevron-left pull-left pts-info-box-back-btn" data-target="task" data-task="'+c.id+'"></i>'+a.i18n.editTask+"</h4>","<fieldset>",'<div class="form-group"><label>'+a.i18n.name+" <small>("+a.i18n.required+")</small> :",'</label><input id="pts-edit-task-input-name" type="text" class="form-control" maxlength="50" value="'+c.name+'">','<div id="pts-edit-task-err-name" style="color:red"></div></div>',
            '<div class="form-group"><label>Id :</label><input id="pts-edit-task-input-id" type="text" class="form-control" maxlength="80" value="'+c.id+'" disabled="disabled"></div>','<div class="form-group"><label>'+a.i18n.color+' :</label><input id="pts-edit-task-input-color" type="color" class="form-control" value="'+c.color+'"></div>','<div class="form-group"><label>'+a.i18n.description+" :</label>",'<textarea id="pts-edit-task-input-description" type="text" class="form-control"  maxlength="255">'+(void 0!=
            c.description?c.description:"")+"</textarea></div>",'<div class="btn-group">','<button type="button" class="pts-close-info-box btn btn-danger">'+a.i18n.cancel+"</button>",'<button type="button" class="btn pts-edit-task-confirm-btn" style="background-color:#0097A7;color:#fff" data-task="'+c.id+'">'+a.i18n.edit+"</button></div>","</fieldset>\n</div>"].join("\n"),b("#pts-info-box-container").append(c)},X=function(c){console.warn("CALL FUNCTION: generateInfoBoxContentAssignTask");var d=u(c);c=['<div class="panel-body">',
            '<h4 class="pts-check-color text-semibold pts-info-box-title progress-bar-striped pts-close-info-box" style="background-color:'+d.color+'" data-update="true">'+d.name,'<i class="glyphicon glyphicon-remove pull-right"></i></h4>','<h4><i class="glyphicon glyphicon-chevron-left pull-left pts-info-box-back-btn" data-target="task" data-task="'+d.id+'"></i>'+a.i18n.assignTaskTitle+"</h4>",'<div class="form-group"><label for="sel42">'+a.i18n.selectUsersToAssign+" : </label>",'<select multiple="" class="form-control pts-task-assign-users-list" id="sel42"></select></div>',
            "<b>"+a.i18n.from+'</b><div class="input-group date pts-datetimepicker-start" id="pts-task-assign-datepicker-start">','<input type="text" class="form-control"/>\n<span class="input-group-addon">\n<span class="glyphicon glyphicon-calendar"></span>\n</span></div>',"<b>"+a.i18n.to+'</b><div class="input-group date pts-datetimepicker-end" id="pts-task-assign-datepicker-end">','<input type="text" class="form-control"/>\n<span class="input-group-addon">\n<span class="glyphicon glyphicon-calendar"></span>\n</span></div><div id="pts-assign-task-err" style="color:red"></div><br><div class="pull-right">',
            '<button id="pts-task-assign-btn" class="btn pts-check-color" style="background-color:#00BCD4" data-task="'+c+'">'+a.i18n.assign+"</button></div>","<br></div>"].join("\n");b("#pts-info-box-container").append(c);b("#pts-task-assign-datepicker-start").datetimepicker().data("DateTimePicker").locale(a.locale).widgetPositioning({horizontal:"left",vertical:"bottom"}).keepOpen(!1);b("#pts-task-assign-datepicker-end").datetimepicker().data("DateTimePicker").locale(a.locale).widgetPositioning({horizontal:"left",
            vertical:"bottom"}).keepOpen(!1);a.users.forEach(function(a,c){b(".pts-task-assign-users-list").append('<option class="pts-task-assign-user-option" value="'+c+'" data-user="'+a.name+'">'+a.name+"</option>")});b.each(d.users,function(c){var g=a.users[c];c=['<hr><div class="pts-info-box-user" data-user="'+g.index+'">','<h4 class=" text-semibold heading-divided">'+g.name+"</h4>",'<table><tbody class="pts-info-box-user-list" data-head="'+g.index+'"></tbody></table></div>'].join("\n");b("#pts-info-box-container > .panel-body").append(c);
            g.tasks.forEach(function(c,e){if(c.id===d.id){var k=['<tr><td><i class="glyphicon glyphicon-trash pts-task-assign-delete-user" data-user="'+g.index+'" data-task="'+c.id+'" data-task-index="'+e+'"></i>',"<b>"+a.i18n.from+"</b> "+moment(c.start_date).locale(a.locale).format("llll")," <b>"+a.i18n.to+"</b> "+moment(c.end_date).locale(a.locale).format("llll")+"</td></tr>"].join("\n");b(".pts-info-box-user-list[data-head="+g.index+"]").append(k)}})});v()},Z=function(){console.warn("CALL FUNCTION: generateInfoBoxContentCreateUser");
            var c=['<div class="panel-body">','<h4 class="text-semibold pts-info-box-title pts-close-info-box pts-check-color" style="background-color:'+a.defaultColor+'">'+a.i18n.addNewUser,'<i class="glyphicon glyphicon-remove pull-right"></i></h4>\n<fieldset>','<div class="form-group"><label>'+a.i18n.name+" <small>("+a.i18n.required+")</small> :</label>",'<input id="pts-add-user-input-name" type="text" class="form-control" maxlength="40">\n<div id="pts-add-user-err-name" style="color:red"></div></div>','<div class="form-group"><label>'+
            a.i18n.group+" :</label>",'<input id="pts-add-user-input-group" type="text" class="form-control" maxlength="60" placeholder="'+a.i18n.createNewGroup+'">',"<span>"+a.i18n.or+'</span><select id="pts-add-user-select-group" type="select" class="form-control" maxlength="60">',"<option disabled selected>"+a.i18n.selectGroup+"</option></select></div>",'<div class="btn-group">','<button type="button" class="pts-close-info-box btn btn-danger">'+a.i18n.cancel+"</button>",'<button type="button" class="btn pts-create-user-btn" style="background-color:#00BCD4;color:#fff" data-assign="true">'+
            a.i18n.createAndAssign+"</button>",'<button type="button" class="btn pts-create-user-btn" style="background-color:#0097A7;color:#fff" data-assign="false">'+a.i18n.create+"</button></div>","</fieldset>\n</div>"].join("\n");b("#pts-info-box-container").append(c);a.groups.forEach(function(a){b("#pts-add-user-select-group").append('<option value="'+a+'">'+a+"</option>")})},O=function(){console.warn("CALL FUNCTION: generateListBaseView");a.list||(a.list={});a.list.display="today";var c=['<button class="btn btn-sm pts-list-range-btn" data-value="all">'+
        a.i18n.all+"</button>",'<button class="btn btn-sm pts-list-range-btn selected" data-value="today">'+a.i18n.today+"</button>",'<button class="btn btn-sm pts-list-range-btn" data-value="week">'+a.i18n.thisWeek+"</button>",'<button class="btn btn-sm pts-list-range-btn" data-value="month">'+a.i18n.thisMonth+"</button>",'<button class="btn btn-sm pts-list-range-btn" data-value="year">'+a.i18n.thisYear+"</button>",'<button class="btn btn-sm pts-list-range-btn" data-value="personalized">'+a.i18n.personalized+
        "</button>",'<div class="pts-list-personalized-inputs-container row"></div>'].join("\n"),d=['<div class="dropdown" style="top:2px"><button id="addDropdown" class="btn btn-sm pts-btn-add-elem dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\n<i class="glyphicon glyphicon-plus"></i></button>\n<ul class="dropdown-menu" aria-labelledby="addDropdown">','<li><a href="#" class="pts-add-new-task">'+a.i18n.addNewTask+"</a></li>",'<li><a href="#" class="pts-add-new-user">'+
        a.i18n.addNewUser+"</a></li></ul></div>"].join("\n");b(".pts-column-title-container > div").append(c);b(".pts-corner-mask").append(d);c=['<input class="pts-list-search-task" placeholder="'+a.i18n.search+'">','<label class="checkbox-inline text-no-select" style="margin-left:5px;"><input id="pts-list-task-select-all" type="checkbox" checked="checked">'+a.i18n.selectAll+"</label>"].join("\n");b(".pts-line-title-container").append(c);a.tasks.forEach(function(a){a=['<div class="pts-list-row-task progress-bar-striped pts-check-color" style="background-color:'+
        a.color+'">','<label class="checkbox-inline"><input class="pts-list-task-enabler-input" type="checkbox" checked="checked" data-task="'+a.id+'">'+a.name+"</label></div>"].join("\n");b(".pts-line-title-container").append(a)});b(".pts-main-content").empty().append('<div class="pts-list-tasks-container row"></div>');v()},ba=function(c){console.log("CALL FUNCTION: generateListTaskContent");var d=0,e=0,g=0,k=0,h=['<div class="col-lg-12 pts-list-task-container" data-task="'+c.id+'">','<div class="panel panel-primary" style="border-color:'+
        c.color+'">','<div class="panel-heading progress-bar-striped pts-check-color pts-list-task-header" style="background-color:'+c.color+";border-color:"+c.color+'"','data-task="'+c.id+'">','<h6 class="panel-title">'+c.name+"</h6>",'<a class="heading-elements-toggle"><i class="icon-menu"></i></a></div>','<div class="panel-body">'+(c.description?c.description:"")+"</div>",'<div class="panel-body"><div class="table-responsive">','<table class="table table-bordered"><tbody class="pts-list-date-list" data-task="'+
        c.id+'"></tbody></table>','</div></div><div class="panel-footer pts-list-task-footer"></div></div></div>'].join("\n");b(".pts-list-tasks-container").append(h);b.each(c.users,function(h,f){d+=f.length;g++;var l=b(document.createElement("tr"));l.append('<td class="pts-list-user-name" data-user="'+h+'">'+a.users[h].name+'</td><td class="pts-dt-list"></td>');var m=!1;f.forEach(function(b){if(z(a.list,a.users[h].tasks[b])||"all"===a.list.display)l.children(".pts-dt-list").append("- <b>"+a.i18n.from+"</b> "+
            moment(a.users[h].tasks[b].start_date).locale(a.locale).format("lll")+"<b> "+a.i18n.to+"</b> "+moment(a.users[h].tasks[b].end_date).locale(a.locale).format("lll")+"<br>"),0==m&&k++,m=!0,e++});m&&b(".pts-list-date-list[data-task="+c.id+"]").append(l)});0!==k&&0!==e||b(".pts-list-task-container[data-task="+c.id+"]").remove();h=["<p><b>"+g+"</b> "+a.i18n.usersWhose+" <b>"+k+"</b> "+a.i18n.inSelectedPeriod+"</p>","<p><b>"+d+"</b> "+a.i18n.cycleWhose+" <b>"+e+"</b> "+a.i18n.inSelectedPeriod+"</p>"].join("\n");
            b(".pts-list-task-container[data-task="+c.id+"] .pts-list-task-footer").append(h);v()},r=function(c,d){console.warn("CALL FUNCTION: generateNotification");if(!a.disableNotifications){var e=M(),g=['<div class="alert alert-'+c+' alert-dismissible" role="alert" data-id="'+e+'">','<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>',d+"</div>"].join("\n");b("#pts-notification-container").append(g);setTimeout(function(){b(".alert[data-id="+
            e+"]").remove()},a.notificationDuration)}};console.group();console.info("Initialization");(function(){console.warn("CALL FUNCTION: getUsersTasksInTasks");if(!a.tasks)return r("danger",a.i18n.notif.noTask);a.tasks.forEach(function(a){D(a)})})();(function(){console.warn("CALL FUNCTION: generateHeader");var b=['<div id="pts-notification-container"></div>\n<div class="pts-header row">\n<div class="pts-header-left-container pull-left">\n<div class="form-group">\n<div class="input-group date" id="header-datetimepicker">\n<input type="text" class="form-control"/>\n<span class="input-group-addon">\n<span class="glyphicon glyphicon-calendar"></span>\n</span></div></div>\n<div class="pts-nav-buttons">\n<button class="btn pts-btn-previous"><i class="glyphicon glyphicon-chevron-left"></i></button>\n<button class="btn pts-btn-next"><i class="glyphicon glyphicon-chevron-right"></i></button>\n</div>\n<span class="pts-header-date-display">',
        "months"===a.currentDisplay?moment(a.date.selected).locale(a.locale).format("MMMM YYYY"):moment(a.date.selected).locale(a.locale).format("LL"),'</span></div>\n<div class="pts-header-right-container pull-right">','<button class="btn btn-sm pts-btn-day-view '+("days"===a.currentDisplay?"pts-active":"")+'">'+a.i18n.days+"</button>",'<button class="btn btn-sm pts-btn-month-view '+("months"===a.currentDisplay?"pts-active":"")+'">'+a.i18n.months+"</button>",'<button class="btn btn-sm pts-btn-list-view" '+
        ("list"===a.currentDisplay?"pts-active":"")+">"+a.i18n.list+"</button></div></div>"].join("\n");E.append(b);L()})();k(a.currentDisplay);console.groupEnd();b(".pts-btn-day-view").click(function(){k("days")});b(".pts-btn-month-view").click(function(){k("months")});b(".pts-btn-list-view").click(function(){k("list")});b(".pts-btn-next").click(function(){b(".pts-scheduler-container").scrollTop(0);console.warn("CALL FUNCTION: goForward");w("task");a.date.selected="months"==a.currentDisplay?moment(a.date.selected).add(1,
        "months"):moment(a.date.selected).add(1,"day");x();y();B()});b(".pts-btn-previous").click(function(){b(".pts-scheduler-container").scrollTop(0);console.warn("CALL FUNCTION: goBackward");w("task");a.date.selected="months"==a.currentDisplay?moment(a.date.selected).add(-1,"months"):moment(a.date.selected).add(-1,"day");x();y();B()});b("#header-datetimepicker").on("dp.change",function(b){b.date!==a.date.selected&&(a.date.selected=b.date,k(a.currentDisplay),x(),y(),B())});b(".pts-scheduler-container").scroll(function(){b(".pts-line-title-container div").scrollTop(b(this).scrollTop());
        b(".pts-column-title-container ").scrollLeft(b(this).scrollLeft());G()});b("#pit-scheduler").on("click",".close-group-panel",function(){var a=b("#group-container-"+b(this).attr("data-group")),d=b("#user-group-"+b(this).attr("data-group"));"opened"===b(this).attr("data-toggle")?(a.children(".pts-main-group-user").css("display","none"),d.children(".pts-group-content").css("display","none"),b(this).attr("data-toggle","closed"),b(this).addClass("closed-btn")):(a.children(".pts-main-group-user").css("display",
        "block"),d.children(".pts-group-content").css("display","block"),b(this).attr("data-toggle","opened"),b(this).removeClass("closed-btn"))});b("#pit-scheduler").on("change","#hide-user-btn",function(){a.hideEmptyLines=b(this).is(":checked");x();y();B()});b("#pit-scheduler").on("change","#disable-labels-mov",function(){a.disableLabelsMovement=b(this).is(":checked");x();y();B()});b("#pit-scheduler").on("click",".pts-column-element[data-date]",function(){a.date.selected=moment(b(this).attr("data-date"));
        k("days");x();y()});b("#pit-scheduler").on("click",".pts-line-marker[data-task], .pts-list-task-header[data-task]",function(){q(b(this).attr("data-task"),null,"task")});b("#pit-scheduler").on("click",".pts-close-info-box",function(){1==b(this).data("update")?k(a.currentDisplay):w()});b("#pit-scheduler").on("click"," .pts-group-user[data-user]",function(){q(null,b(this).data("user"),"user")});b("#pit-scheduler").on("click",".pts-info-box-task-header[data-task][data-user]",function(){q(b(this).data("task"),
        b(this).data("user"),"task")});b("#pit-scheduler").on("click","#pts-list-task-select-all",function(){b(".pts-list-task-enabler-input").prop("checked",b(this).context.checked);C(a.list.display)});b("#pit-scheduler").on("click",".pts-list-task-enabler-input",function(){var c=!0;b(".pts-list-task-enabler-input").each(function(){0==b(this).prop("checked")&&(c=!1)});0==c?b("#pts-list-task-select-all").prop("checked",!1):b("#pts-list-task-select-all").prop("checked",!0);C(a.list.display)});b("#pit-scheduler").on("click",
        ".pts-list-range-btn[data-value]",function(){var c=b(this).data("value");a.list.display=c;b(".pts-list-personalized-inputs-container").empty();b(".pts-list-range-btn").removeClass("selected");b(this).addClass("selected");"personalized"!==c?C(c):(console.log("CALL FUNCTION: generateRangePicker"),b(".pts-list-range-btn").css("display","none"),c=['<div class="col-sm-5"><span>'+a.i18n.from+'</span><div class="input-group date pts-datetimepicker-start" id="pts-list-datetimepicker-start">','<input type="text" class="form-control"/>\n<span class="input-group-addon">\n<span class="glyphicon glyphicon-calendar"></span>\n</span></div></div>',
            '<div class="col-sm-5"><span>'+a.i18n.to+'</span><div class="input-group date pts-datetimepicker-end" id="pts-list-datetimepicker-end">','<input type="text" class="form-control"/>\n<span class="input-group-addon">\n<span class="glyphicon glyphicon-calendar"></span>\n</span></div></div>\n<div class="col-sm-2"><button class="btn pts-list-range-submit btn-icon"><i class="glyphicon glyphicon-ok"></i></button>\n<button class="btn pts-list-range-dismiss btn-danger btn-icon"><i class="glyphicon glyphicon-remove"></i></button></div>'].join("\n"),
            b(".pts-list-personalized-inputs-container").append(c),b("#pts-list-datetimepicker-start").datetimepicker().data("DateTimePicker").locale(a.locale),b("#pts-list-datetimepicker-end").datetimepicker().data("DateTimePicker").locale(a.locale))});b("#pit-scheduler").on("dp.change",".pts-datetimepicker-start",function(a){b(".pts-datetimepicker-end").data("DateTimePicker").minDate(a.date).date(a.date).viewDate(a.date)});b("#pit-scheduler").on("dp.change",".pts-datetimepicker-start, .pts-datetimepicker-end",
        function(a){b(".pts-datetimepicker-end").data("DateTimePicker").hide();b(".pts-datetimepicker-start").data("DateTimePicker").hide()});b("#pit-scheduler").on("click",".pts-list-range-submit",function(){a.list.start_date=b("#pts-list-datetimepicker-start").data("DateTimePicker").date();a.list.end_date=b("#pts-list-datetimepicker-end").data("DateTimePicker").date();b(".pts-list-personalized-inputs-container").empty();b(".pts-list-range-btn").css("display","block");if(!a.list.start_date||!a.list.end_date)return b(".pts-list-range-btn").removeClass("selected");
        C("personalized")});b("#pit-scheduler").on("click",".pts-list-range-dismiss",function(){b(".pts-list-personalized-inputs-container").empty();b(".pts-list-range-btn").css("display","block");b(".pts-list-range-btn").removeClass("selected")});b("#pit-scheduler").on("click",".pts-list-user-name[data-user]",function(){q(null,b(this).data("user"),"user")});b("#pit-scheduler").on("keyup",".pts-list-search-task",function(){var a=b(this).val().toLowerCase();b(".pts-list-row-task").each(function(){0<=b(this).children("label").text().toLowerCase().indexOf(a)?
        b(this).css("display","block"):b(this).css("display","none")})});b("#pit-scheduler").on("click",".pts-add-new-task",function(){q(null,null,"createTask")});b("#pit-scheduler").on("click",".pts-add-new-user",function(){q(null,null,"createUser")});b("#pit-scheduler").on("click",".pts-create-task-btn",function(){var c=b("#pts-add-task-input-name").val(),d=b("#pts-add-task-input-id").val(),e=b("#pts-add-task-input-description").val(),g=b("#pts-add-task-input-color").val();b("#pts-add-task-err-name").html("");
        b("#pts-add-task-err-id").html("");b.each(a.tasks,function(e,g){g.name==c&&(b("#pts-add-task-err-name").html(a.i18n.nameAlreadyTaken),c="");g.id==d&&(b("#pts-add-task-err-id").html(a.i18n.idAlreadyTaken),c="")});1>c.length||(w(),ca(c,d,e,g,b(this).data("assign")))});b("#pit-scheduler").on("click",".pts-create-user-btn",function(){var c=b("#pts-add-user-input-name").val(),d=b("#pts-add-user-input-group").val();b("#pts-add-user-err-name").html("");if(1>c.length)return b("#pts-add-user-err-name").html(a.i18n.requiredField);
        w();var e=b(this).data("assign");console.warn("CALL FUNCTION: createNewUser");a.users.push({name:c,group:d?d:"",tasks:[]});if(a.onUserCreation&&"function"===typeof a.onUserCreation)a.onUserCreation(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);r("success",a.i18n.notif.userCreated+" : <b>"+c+"</b>");K();1==e?q(null,a.users.length-1,"assignUser"):k(a.currentDisplay)});b("#pit-scheduler").on("click",".pts-delete-task-btn[data-task]",function(){b(this).attr("data-confirm")&&"false"==
    b(this).attr("data-confirm")?(b(this).text(a.i18n.confirm),b(this).attr("data-confirm",!0)):da(b(this).data("task"))});b("#pit-scheduler").on("click",".pts-assign-task-btn",function(){q(b(this).data("task"),null,"assignTask")});b("#pit-scheduler").on("click","#pts-task-assign-btn[data-task]",function(){var c=b(".pts-datetimepicker-start").data("DateTimePicker").date(),d=b(".pts-datetimepicker-end").data("DateTimePicker").date(),e=b(".pts-task-assign-users-list").val(),g=u(b(this).data("task"));e&&
    c&&d?ea(e,g,c,d):b("#pts-assign-task-err").text(a.i18n.allInputRequired)});b("#pit-scheduler").on("click",".pts-main-group-user, .pts-scheduler-container",function(c){c.target===this&&(1==b(".pts-close-info-box").data("update")?k(a.currentDisplay):w())});b("#pit-scheduler").on("click",".pts-task-assign-delete-user[data-user][data-task][data-task-index]",function(){var c=b(this).data("user"),d=u(b(this).data("task")),e=b(this).data("task-index");if(a.users[c].tasks[e].id==d.id){c=a.users[c];console.warn("CALL FUNCTION: deleteTaskFromUser");
        if(c.tasks[e]){delete c.tasks[e];D(d);if(a.onUserTaskDeletion&&"function"===typeof a.onUserTaskDeletion)a.onUserTaskDeletion(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);r("success","<b>"+c.name+"</b> "+a.i18n.notif.userUnassigned)}b(this).parent("td").remove()}});b("#pit-scheduler").on("click",".pts-edit-task-btn[data-task]",function(){q(b(this).data("task"),null,"editTask")});b("#pit-scheduler").on("click",".pts-edit-task-confirm-btn[data-task]",function(){var c=u(b(this).data("task")),
        d,e,g;d=b("#pts-edit-task-input-name").val();e=b("#pts-edit-task-input-color").val();g=b("#pts-edit-task-input-description").val();console.warn("CALL FUNCTION: editTask");c.name=d?d:c.name;c.color=e?e:c.color;c.description=g?g:c.description;k(a.currentDisplay);if(a.onTaskEdition&&"function"===typeof a.onTaskEdition)a.onTaskEdition(a);if(a.onChange&&"function"===typeof a.onChange)a.onChange(a);r("success",a.i18n.notif.taskInformationsUpdated)});b("#pit-scheduler").on("click",".pts-info-box-back-btn[data-target]",
        function(){q(b(this).data("task"),b(this).data("user"),b(this).data("target"))});b("#pit-scheduler").on("change","#pts-add-user-select-group",function(){b("#pts-add-user-input-group").val(b(this).val())});return E}})(jQuery);